#include <stdio.h>
#include <string.h>
#include <unistd.h>

#define buf_size 3*16+8+1

void init() {
    setvbuf(stdin, NULL, _IONBF, 0);
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stderr, NULL, _IONBF, 0);
}

void readnline(char* buf, size_t n) {
    for (int i = 0; i <= n; ++i) {
        char x;
        int chk = read(0, &buf[i], 1);
        if (chk <= 0) {
            break;
        }
        if ((x = buf[i]) == '\n') {
            buf[i] = '\0';
            return;
        }
    }
}

// void win() {
//     system("cat flag.txt");
// }

int main()
{
    init();
    printf("\nWelcome to Greetify v2! ^^\nWe are here to greet you, hope you enjoy our company! :D");
    printf("\nFirst off, what is your name? ");

    char buf[buf_size - 1];
    // scanf("%s", buf);
    readnline(buf, buf_size - 1);

    printf("\nHello, ");
    printf(buf);
    printf("!ðŸ‘‹\nBye bye, please come back if you are lonely, we are always here for you! :D");
}
